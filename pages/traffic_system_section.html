<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</title>
    <link rel="stylesheet" href="../css/imamu-brand-identity.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: var(--brand-bg-pattern);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-3xl);
            margin-bottom: var(--spacing-2xl);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-2xl);
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"><circle cx="40" cy="40" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            background-size: 20px 20px;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-icon {
            font-size: 80px;
            margin-bottom: var(--spacing-lg);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .hero-title {
            font-size: var(--font-size-4xl);
            font-weight: var(--font-weight-extrabold);
            color: var(--primary-white);
            margin-bottom: var(--spacing-md);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: var(--font-size-xl);
            color: rgba(255, 255, 255, 0.9);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Stats Bar */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .stat-item {
            background: var(--primary-white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            text-align: center;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .stat-icon {
            font-size: 40px;
            margin-bottom: var(--spacing-md);
        }

        .stat-value {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-extrabold);
            color: var(--primary-steel-blue);
            margin-bottom: var(--spacing-sm);
        }

        .stat-label {
            color: var(--neutral-600);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
        }

        /* Section Title */
        .section-title {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
        }

        .section-title h2 {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-extrabold);
            color: var(--primary-steel-blue);
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 3px;
            background: var(--gradient-secondary);
            border-radius: var(--radius-full);
        }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-2xl);
        }

        .service-card {
            background: var(--primary-white);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            box-shadow: var(--shadow-lg);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: block;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-primary);
            transition: height 0.3s ease;
        }

        .service-card:hover::before {
            height: 100%;
            opacity: 0.05;
        }

        .service-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-2xl);
            border-color: var(--primary-sky-blue);
        }

        .service-card.vehicles::before {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }

        .service-card.images::before {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        }

        .service-card.violations::before {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .service-card.statistics::before {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .service-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .service-card.vehicles .service-icon {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }

        .service-card.images .service-icon {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        }

        .service-card.violations .service-icon {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .service-card.statistics .service-icon {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .service-icon i {
            font-size: 40px;
            color: var(--primary-white);
        }

        .service-card h3 {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-extrabold);
            color: var(--primary-steel-blue);
            margin-bottom: var(--spacing-md);
        }

        .service-card p {
            color: var(--neutral-600);
            font-size: var(--font-size-base);
            line-height: 1.8;
            margin-bottom: var(--spacing-lg);
        }

        .service-features {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--neutral-100);
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            color: var(--neutral-700);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
        }

        .feature-item i {
            color: var(--primary-sky-blue);
            font-size: 16px;
        }

        /* Database Section */
        .database-section {
            background: var(--primary-white);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            margin-bottom: var(--spacing-2xl);
            box-shadow: var(--shadow-lg);
        }

        .database-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
        }

        .table-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            border: 2px solid var(--neutral-200);
            transition: all 0.3s ease;
        }

        .table-card:hover {
            border-color: var(--primary-sky-blue);
            transform: translateY(-3px);
        }

        .table-card h4 {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: var(--primary-steel-blue);
            margin-bottom: var(--spacing-md);
        }

        .table-card h4 i {
            color: var(--primary-sky-blue);
        }

        .table-card p {
            color: var(--neutral-600);
            font-size: var(--font-size-sm);
            line-height: 1.6;
        }

        .table-relations {
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px dashed var(--neutral-300);
            font-size: var(--font-size-xs);
            color: var(--neutral-500);
        }

        .table-relations span {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: var(--primary-steel-blue);
            color: var(--primary-white);
            padding: 4px 10px;
            border-radius: var(--radius-full);
            margin: 2px;
            font-weight: var(--font-weight-medium);
        }

        /* Back Button */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            background: var(--gradient-secondary);
            color: var(--primary-white);
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-lg);
            text-decoration: none;
            font-weight: var(--font-weight-bold);
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            margin-bottom: var(--spacing-xl);
        }

        .back-btn:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
        }

        /* Footer */
        .footer {
            background: rgba(255,255,255,0.9);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-xl);
            text-align: center;
            color: var(--neutral-600);
            font-size: var(--font-size-sm);
        }

        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-2xl);
        }

        .chart-card {
            background: var(--primary-white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .chart-card h3 {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--primary-steel-blue);
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--neutral-100);
        }

        .chart-card h3 i {
            color: var(--primary-sky-blue);
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-section {
                padding: var(--spacing-2xl);
            }

            .hero-icon {
                font-size: 60px;
            }

            .hero-title {
                font-size: var(--font-size-2xl);
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }

            .charts-section {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="brand-header">
            <div class="brand-logo-container">
                <div class="brand-logo">
                    <img src="../assets/Ø´Ø¹Ø§Ø±.jpg" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©">
                </div>
            </div>
        </div>

        <!-- Back Button -->
        <a href="traffic_main.html" class="back-btn">
            <i class="fas fa-arrow-right"></i>
            <span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø±ÙˆØ±</span>
        </a>

        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-content">
                <div class="hero-icon">ğŸš—</div>
                <h1 class="hero-title">Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</h1>
                <p class="hero-subtitle">
                    Ù†Ø¸Ø§Ù… Ø´Ø§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙˆØ±ÙŠØ© Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªÙƒØ§Ù…Ù„Ø© 
                    ØªØ±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØµÙˆØ±Ù‡Ø§ ÙˆÙ…Ø®Ø§Ù„ÙØ§ØªÙ‡Ø§ ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙ‡Ø§
                </p>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-icon" style="color: #2ecc71;">ğŸš—</div>
                <div class="stat-value" id="totalVehicles">0</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon" style="color: #3498db;">ğŸ“·</div>
                <div class="stat-value" id="totalImages">0</div>
                <div class="stat-label">Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon" style="color: #e74c3c;">âš ï¸</div>
                <div class="stat-value" id="totalViolations">0</div>
                <div class="stat-label">Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon" style="color: #f39c12;">ğŸ“Š</div>
                <div class="stat-value" id="openViolations">0</div>
                <div class="stat-label">Ù…Ø®Ø§Ù„ÙØ§Øª Ù…ÙØªÙˆØ­Ø©</div>
            </div>
        </div>

        <!-- Main Services Section -->
        <div class="section-title">
            <h2><i class="fas fa-th-large"></i> Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
        </div>

        <div class="services-grid">
            <!-- Vehicles Management -->
            <a href="traffic_vehicles_management.html" class="service-card vehicles">
                <div class="service-icon">
                    <i class="fas fa-car"></i>
                </div>
                <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</h3>
                <p>Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ù…Ø¹ ØªØ³Ø¬ÙŠÙ„ ÙƒØ§ÙØ© Ø¨ÙŠØ§Ù†Ø§ØªÙ‡Ø§ ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„ØªÙ‡Ø§</p>
                <div class="service-features">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø§Ù„Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
                    </div>
                </div>
            </a>

            <!-- Vehicle Images -->
            <a href="traffic_vehicle_images.html" class="service-card images">
                <div class="service-icon">
                    <i class="fas fa-images"></i>
                </div>
                <h3>ØµÙˆØ± Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</h3>
                <p>Ø¥Ø¯Ø§Ø±Ø© ÙˆØ¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ù…Ø±ÙƒØ¨Ø© Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø±ÙØ¹ ÙˆØ§Ù„Ø­Ø°Ù</p>
                <div class="service-features">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø±ÙØ¹ ØµÙˆØ± Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø¹Ø±Ø¶ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø±Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø¨Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·</span>
                    </div>
                </div>
            </a>

            <!-- Violations Management -->
            <a href="traffic_violations_management.html" class="service-card violations">
                <div class="service-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</h3>
                <p>ØªØ³Ø¬ÙŠÙ„ ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙˆØ±ÙŠØ© Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…ØªØ®Ø°</p>
                <div class="service-features">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø©</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø¥Ø±ÙØ§Ù‚ Ø§Ù„ØµÙˆØ±</span>
                    </div>
                </div>
            </a>

            <!-- Statistics -->
            <a href="traffic_violation_stats.html" class="service-card statistics">
                <div class="service-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h3>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>
                <p>Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ù„ÙƒÙ„ Ù…Ø±ÙƒØ¨Ø© ÙˆÙ†ÙˆØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©</p>
                <div class="service-features">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØºØ±Ø§Ù…Ø§Øª</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Ù…ØªÙˆØ³Ø· Ø§Ù„ØºØ±Ø§Ù…Ø§Øª</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙØµÙ„Ø©</span>
                    </div>
                </div>
            </a>
        </div>

        <!-- Charts Section - Violations Analysis -->
        <div class="section-title">
            <h2><i class="fas fa-chart-pie"></i> ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</h2>
        </div>

        <div class="charts-section">
            <!-- Violations Pie Chart -->
            <div class="chart-card">
                <h3><i class="fas fa-chart-pie"></i> ğŸ¥§ ØªÙˆØ²ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</h3>
                <div class="chart-container">
                    <canvas id="violationsPieChart"></canvas>
                </div>
            </div>

            <!-- Violations Trend Chart -->
            <div class="chart-card">
                <h3><i class="fas fa-chart-line"></i> ğŸ“ˆ ØªØ·ÙˆØ± Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø¨Ù…Ø±ÙˆØ± Ø§Ù„ÙˆÙ‚Øª</h3>
                <div class="chart-container">
                    <canvas id="violationsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Database Structure Section -->
        <div class="database-section">
            <div class="section-title">
                <h2><i class="fas fa-database"></i> Ù‡ÙŠÙƒÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
            </div>

            <div class="database-grid">
                <!-- Vehicles Table -->
                <div class="table-card">
                    <h4><i class="fas fa-car"></i> Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (traffic_vehicles)</h4>
                    <p>
                        ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©ØŒ 
                        Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©ØŒ Ø§Ù„Ù„ÙˆÙ†ØŒ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„ ÙˆØ¢Ø®Ø± Ø¸Ù‡ÙˆØ±
                    </p>
                    <div class="table-relations">
                        <i class="fas fa-link"></i> Ù…Ø±ØªØ¨Ø· Ø¨Ù€:
                        <span>ØµÙˆØ± Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</span>
                        <span>Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª</span>
                        <span>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</span>
                    </div>
                </div>

                <!-- Vehicle Images Table -->
                <div class="table-card">
                    <h4><i class="fas fa-images"></i> Ø¬Ø¯ÙˆÙ„ ØµÙˆØ± Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (vehicle_images)</h4>
                    <p>
                        ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ù…Ø±ÙƒØ¨Ø© Ù…Ø¹ Ù…Ø³Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·
                    </p>
                    <div class="table-relations">
                        <i class="fas fa-link"></i> Ù…Ø±ØªØ¨Ø· Ø¨Ù€:
                        <span>Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (FK)</span>
                    </div>
                </div>

                <!-- Violations Table -->
                <div class="table-card">
                    <h4><i class="fas fa-exclamation-triangle"></i> Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª (traffic_violations)</h4>
                    <p>
                        ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù…Ø¹ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©ØŒ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ 
                        Ø§Ø³Ù… Ø§Ù„Ø¶Ø§Ø¨Ø·ØŒ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…ØªØ®Ø°ØŒ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ ÙˆØµÙˆØ±Ø© Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©
                    </p>
                    <div class="table-relations">
                        <i class="fas fa-link"></i> Ù…Ø±ØªØ¨Ø· Ø¨Ù€:
                        <span>Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (FK)</span>
                    </div>
                </div>

                <!-- Statistics Table -->
                <div class="table-card">
                    <h4><i class="fas fa-chart-bar"></i> Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (violation_stats)</h4>
                    <p>
                        ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ù„ÙƒÙ„ Ù…Ø±ÙƒØ¨Ø© ÙˆÙ†ÙˆØ¹ Ù…Ø®Ø§Ù„ÙØ© Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ 
                        Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØŒ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØºØ±Ø§Ù…Ø§ØªØŒ ÙˆÙ…ØªÙˆØ³Ø· Ø§Ù„ØºØ±Ø§Ù…Ø©
                    </p>
                    <div class="table-relations">
                        <i class="fas fa-link"></i> Ù…Ø±ØªØ¨Ø· Ø¨Ù€:
                        <span>Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (FK)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Â© 2024 Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø¥Ù…Ø§Ù… Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <p style="margin-top: var(--spacing-sm); opacity: 0.8;">
                Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ - Ø§Ù„Ø¥ØµØ¯Ø§Ø± 1.0
            </p>
        </div>
    </div>

    <script>
        // API URL - change to your API server URL
        const API_URL = '/api';
        
        // Demo violations data for charts
        const demoViolationsData = [
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-01-15' },
            { violation_type: 'ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø³Ø±Ø¹Ø©', violation_date: '2024-01-20' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-02-10' },
            { violation_type: 'Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ù„ØµÙ‚', violation_date: '2024-02-15' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-02-25' },
            { violation_type: 'ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø³Ø±Ø¹Ø©', violation_date: '2024-03-05' },
            { violation_type: 'Ø¹Ø¯Ù… Ø­Ù…Ù„ Ø±Ø®ØµØ©', violation_date: '2024-03-12' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-03-20' },
            { violation_type: 'Ù…Ø®Ø§Ù„ÙØ© Ø£Ø®Ø±Ù‰', violation_date: '2024-04-01' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-04-10' },
            { violation_type: 'Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ù„ØµÙ‚', violation_date: '2024-04-18' },
            { violation_type: 'ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø³Ø±Ø¹Ø©', violation_date: '2024-05-05' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-05-15' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-05-22' },
            { violation_type: 'Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ù„ØµÙ‚', violation_date: '2024-06-01' },
            { violation_type: 'ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø³Ø±Ø¹Ø©', violation_date: '2024-06-10' },
            { violation_type: 'ÙˆÙ‚ÙˆÙ Ø®Ø§Ø·Ø¦', violation_date: '2024-06-15' }
        ];
        
        // Load statistics on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadStatistics();
            loadViolationsPie();
            loadViolationsTrend();
        });

        async function loadStatistics() {
            try {
                // Try to fetch from API, otherwise use demo data
                const response = await fetch('/api/traffic/statistics');
                if (response.ok) {
                    const data = await response.json();
                    updateStatistics(data);
                } else {
                    // Use demo data
                    updateStatistics({
                        totalVehicles: 156,
                        totalImages: 423,
                        totalViolations: 89,
                        openViolations: 12
                    });
                }
            } catch (error) {
                console.log('Using demo statistics');
                // Use demo data
                updateStatistics({
                    totalVehicles: 156,
                    totalImages: 423,
                    totalViolations: 89,
                    openViolations: 12
                });
            }
        }

        function updateStatistics(data) {
            animateCounter('totalVehicles', data.totalVehicles || 0);
            animateCounter('totalImages', data.totalImages || 0);
            animateCounter('totalViolations', data.totalViolations || 0);
            animateCounter('openViolations', data.openViolations || 0);
        }

        function animateCounter(elementId, target) {
            const element = document.getElementById(elementId);
            const duration = 1500;
            const start = 0;
            const increment = target / (duration / 16);
            let current = start;

            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current).toLocaleString('ar-SA');
            }, 16);
        }

        // Shared function to fetch violations data
        async function fetchViolationsData() {
            try {
                const res = await fetch(`${API_URL}/violations`);
                if (res.ok) {
                    return await res.json();
                }
                return demoViolationsData;
            } catch (error) {
                console.log('Using demo violations data');
                return demoViolationsData;
            }
        }

        // Generate colors for chart based on number of items
        function generateChartColors(count) {
            const baseColors = [
                "#3498db", "#e74c3c", "#f1c40f", "#2ecc71", "#9b59b6", 
                "#34495e", "#1abc9c", "#e67e22", "#95a5a6", "#d35400",
                "#27ae60", "#2980b9", "#8e44ad", "#c0392b", "#16a085"
            ];
            const colors = [];
            for (let i = 0; i < count; i++) {
                colors.push(baseColors[i % baseColors.length]);
            }
            return colors;
        }

        // ğŸ¥§ ØªÙˆØ²ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª - Pie Chart
        async function loadViolationsPie() {
            const data = await fetchViolationsData();

            // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            const countsByType = {};
            data.forEach(vl => {
                const type = vl.violation_type || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
                countsByType[type] = (countsByType[type] || 0) + 1;
            });

            const labels = Object.keys(countsByType);
            const values = Object.values(countsByType);

            const ctx = document.getElementById("violationsPieChart").getContext("2d");
            new Chart(ctx, {
                type: "pie",
                data: {
                    labels,
                    datasets: [{
                        label: "ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª",
                        data: values,
                        backgroundColor: generateChartColors(labels.length)
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: "ØªÙˆØ²ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª" },
                        legend: { 
                            position: "right",
                            rtl: true,
                            labels: {
                                font: { family: 'Tajawal, Arial, sans-serif' }
                            }
                        }
                    }
                }
            });
        }

        // ğŸ“ˆ ØªØ·ÙˆØ± Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø¨Ù…Ø±ÙˆØ± Ø§Ù„ÙˆÙ‚Øª - Line Chart
        async function loadViolationsTrend() {
            const data = await fetchViolationsData();

            // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø±
            const countsByMonth = {};
            data.forEach(vl => {
                // Validate date before processing
                if (!vl.violation_date) return;
                const date = new Date(vl.violation_date);
                if (isNaN(date.getTime())) return; // Skip invalid dates
                
                const monthKey = `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,"0")}`;
                countsByMonth[monthKey] = (countsByMonth[monthKey] || 0) + 1;
            });

            const labels = Object.keys(countsByMonth).sort();
            const values = labels.map(l => countsByMonth[l]);

            const ctx = document.getElementById("violationsChart").getContext("2d");
            new Chart(ctx, {
                type: "line",
                data: {
                    labels,
                    datasets: [{
                        label: "Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª",
                        data: values,
                        borderColor: "#e74c3c",
                        backgroundColor: "rgba(231,76,60,0.2)",
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: "ØªØ·ÙˆØ± Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø´Ù‡Ø±ÙŠÙ‹Ø§" }
                    },
                    scales: {
                        x: { title: { display: true, text: "Ø§Ù„Ø´Ù‡Ø±" } },
                        y: { title: { display: true, text: "Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª" }, beginAtZero: true }
                    }
                }
            });
        }
    </script>
</body>
</html>
